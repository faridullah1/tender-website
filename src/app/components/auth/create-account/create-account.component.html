<div class="create-account">
	<div *ngIf="!message">
		<h2 class="heading">New Account</h2>

		<form [formGroup]="theForm" class="form">
			<div class="row col-sm-12">
				<div class="form-group col-sm-5">
					<label for="name">Name</label>
					<input id="name" type="text" class="form-control" placeholder="Enter Name" formControlName="name">
					<div class="alert alert-danger" *ngIf="theForm.get('name')?.touched && theForm.get('name')?.invalid">
						<div *ngIf="theForm.get('name')?.hasError('required')">Name is required</div>
					</div>
				</div>

				<div class="form-group col-sm-5 d-flex flex-column">
					<label for="mobile_number">Mobile Number</label>
					<input [readonly]="isMobileVerfied" id="mobile_number" type="text" class="form-control" 
						(keydown)="numericOnly($event)" placeholder="Enter Mobile number" formControlName="mobileNumber">

					<small *ngIf="!isMobileVerfied" class="form-text text-muted">Don't add initial Zero</small>
					<small *ngIf="isMobileVerfied" class="form-text text-success">Mobile Number Verified.</small>

					<div class="alert alert-danger" *ngIf="theForm.get('mobileNumber')?.touched && theForm.get('mobileNumber')?.invalid">
						<div *ngIf="theForm.get('mobileNumber')?.hasError('required')">Mobile Number is required</div>
						<div *ngIf="theForm.get('mobileNumber')?.hasError('minlength')">Mobile Number should be 10 characters long</div>
						<div *ngIf="theForm.get('mobileNumber')?.hasError('maxlength')">Mobile Number should be 10 characters long</div>
					</div>

					<div>
						<button class="btn btn-primary mt-3" *ngIf="theForm.get('mobileNumber')?.valid && !verificationCode" 
							[disabled]="disableVerifyBtn" (click)="onOTPVerification()">OTP Verification
						</button>
					</div>

					<div class="d-flex mt-3" *ngIf="verificationCode && !isMobileVerfied">
						<input class="form-control verify-field" #code (keydown)="numericOnly($event)" placeholder="Code">
						<small *ngIf="isMobileVerfied" class="form-text text-danger">Invalid Verification Code.</small>
						
						<button class="btn btn-primary px-2"  
							(click)="onVerify(code.value)">Verify
						</button>
					</div>
				</div>
			</div>

			<div class="row col-sm-12">
				<div class="form-group col-sm-5">
					<label for="email">Email</label>
					<input id="email" type="email" class="form-control" placeholder="Enter Email" formControlName="email">

					<div class="alert alert-danger" *ngIf="theForm.get('email')?.touched && theForm.get('email')?.invalid">
						<div *ngIf="theForm.get('email')?.hasError('required')">Email is required</div>
						<div *ngIf="theForm.get('email')?.hasError('email')">Email is invalid</div>
					</div>
				</div>

				<div class="form-group col-sm-5">
					<label for="password">Password</label>
					<input id="password" type="password" class="form-control" placeholder="Enter Password" formControlName="password">
					<div class="alert alert-danger" *ngIf="theForm.get('password')?.touched && theForm.get('password')?.invalid">
						<div *ngIf="theForm.get('password')?.hasError('required')">Password is required</div>
					</div>
				</div>
			</div>

			<div class="row col-sm-12">
				<div class="form-group col-sm-5">
					<label for="confirm_password">Confirm Password</label>
					<input id="confirm_password" type="password" class="form-control" placeholder="Enter Confirm Password" formControlName="confirmPassword">

					<div class="alert alert-danger" *ngIf="theForm.get('confirmPassword')?.touched && theForm.get('confirmPassword')?.invalid">
						<div *ngIf="theForm.get('confirmPassword')?.hasError('required')">Confirm Password is required</div>
						<div *ngIf="theForm.get('confirmPassword')?.hasError('matching')">Password and confirmPassword are not matched</div>
					</div>
				</div>
			</div>
			
			<div class="actions">
				<button class="btn" (click)="onSubmit()" [disabled]="theForm.invalid || !isMobileVerfied || disableSubmitBtn">
					<span *ngIf="!disableSubmitBtn">Submit</span>
					<div class="flex" *ngIf="disableSubmitBtn">
						<span class="spinner-border" role="status" aria-hidden="true"></span>
						<span class="sr-only ml-3">submutting...</span>
					</div>
				</button>
			</div>
		</form>
	</div>

	<h2 class="message" *ngIf="message">{{ message }}</h2>
</div>
